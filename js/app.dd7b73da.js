(function(){"use strict";var e={3282:function(e,t,s){var n={};s.r(n);var a=s(5130),o=s(6768);const r={id:"app"};function i(e,t,s,n,a,i){const u=(0,o.g2)("NavBar"),l=(0,o.g2)("router-view"),c=(0,o.g2)("BottomBar");return(0,o.uX)(),(0,o.CE)("div",r,[i.isWelcomePage?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(u,{key:0})),(0,o.bF)(l),i.isWelcomePage?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(c,{key:1}))])}const u={class:"bottom-bar"},l={class:"home-icon"};function c(e,t,s,n,a,r){const i=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("nav",u,[(0,o.Lk)("button",{class:"nav-item",onClick:t[0]||(t[0]=e=>r.navigateTo("Pet"))},[(0,o.bF)(i,{icon:["fas","paw"],class:"icon"})]),(0,o.Lk)("button",{class:"nav-item",onClick:t[1]||(t[1]=e=>r.navigateTo("Task"))},[(0,o.bF)(i,{icon:["fas","tasks"],class:"icon"})]),(0,o.Lk)("button",{class:"nav-item home-btn",onClick:t[2]||(t[2]=e=>r.navigateTo("Main"))},[(0,o.Lk)("div",l,[(0,o.bF)(i,{icon:["fas","home"],class:"icon"})])]),(0,o.Lk)("button",{class:"nav-item",onClick:t[3]||(t[3]=e=>r.navigateTo("Shop"))},[(0,o.bF)(i,{icon:["fas","store"],class:"icon"})]),(0,o.Lk)("button",{class:"nav-item",onClick:t[4]||(t[4]=e=>r.navigateTo("Profile"))},[(0,o.bF)(i,{icon:["fas","user"],class:"icon"})])])}s(4114);var p={methods:{navigateTo(e){this.$router.push({name:e})}}},d=s(1241);const v=(0,d.A)(p,[["render",c],["__scopeId","data-v-e87d8c8a"]]);var m=v,h=s(4232);const k={class:"nav-bar"},f={class:"nav-item coins"},g={class:"nav-item username"};function b(e,t,s,n,a,r){return(0,o.uX)(),(0,o.CE)("nav",k,[(0,o.Lk)("div",f,"Coins: "+(0,h.v_)(n.virtualCoins),1),(0,o.Lk)("div",g,"Hi, "+(0,h.v_)(n.user?n.user.displayName:"Guest"),1),n.user?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"logout-btn",onClick:t[0]||(t[0]=(...e)=>n.handleLogout&&n.handleLogout(...e))},"Logout")):(0,o.Q3)("",!0)])}var C=s(973);const L={id:"app"},y={key:0,class:"login-container"},E={class:"login-box"},I={key:1,class:"user-info"},S={class:"form-group"},T={class:"form-group"};function A(e,t,s,n,r,i){return(0,o.uX)(),(0,o.CE)("div",L,[r.user?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",y,[(0,o.Lk)("div",E,[t[4]||(t[4]=(0,o.Lk)("h1",null,"Welcome to TSMC-pet",-1)),t[5]||(t[5]=(0,o.Lk)("p",null,"Your journey to success and rewards starts here",-1)),(0,o.Lk)("button",{class:"login-btn",onClick:t[0]||(t[0]=(...e)=>i.login&&i.login(...e))}," Login with Google ")])])),r.user?((0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("h2",null,"Welcome, "+(0,h.v_)(r.user.displayName)+"!",1),(0,o.Lk)("p",null,"Your ID: "+(0,h.v_)(r.user.uid),1),(0,o.Lk)("div",S,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.name=e),placeholder:"Enter your pet's name",class:"input-field"},null,512),[[a.Jo,r.name]])]),(0,o.Lk)("div",T,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.balance=e),placeholder:"Enter your pet's energy level",type:"number",class:"input-field"},null,512),[[a.Jo,r.balance,void 0,{number:!0}]])]),(0,o.Lk)("button",{class:"save-btn",onClick:t[3]||(t[3]=(...e)=>i.saveData&&i.saveData(...e))},"Save Pet Info")])):(0,o.Q3)("",!0)])}var P=s(6400),w=s(7617),X=s(4161),_=s(6971);const O={apiKey:"AIzaSyBv5UlN_6wbxZBLZcP13UcwM6unIixKn6I",authDomain:"vue-http-demo-8773a.firebaseapp.com",databaseURL:"https://vue-http-demo-8773a-default-rtdb.firebaseio.com",projectId:"vue-http-demo-8773a",storageBucket:"vue-http-demo-8773a.appspot.com",messagingSenderId:"189657556660",appId:"1:189657556660:web:4650bcc6ad7106bdcc59e1"},U=(0,P.Wp)(O),D=((0,w.aU)(U),(0,X.C3)(U)),W=(0,_.xI)(U),N=new _.HF;function q(){return(0,_.df)(W,N)}var F={name:"WelcomePage",data(){return{user:null,name:"",balance:0}},methods:{async login(){try{const e=await q();this.user=e.user,localStorage.setItem("user",JSON.stringify(this.user)),this.$router.push("/main")}catch(e){console.error("Error during Google login:",e)}},saveData(){if(this.user){const e=this.user.uid,t=(0,X.KR)(D,"users/"+e);(0,X.hZ)(t,{petName:this.name,petEnergy:this.balance}).then((()=>{console.log("Pet data saved successfully")})).catch((e=>{console.error("Error saving pet data:",e)}))}}}};const $=(0,d.A)(F,[["render",A]]);var K=$;const x={id:"main-page"},j={key:0},J={key:1,class:"card pet-display"},Q={class:"pet-level"},B={key:2,class:"card task-status"},R={class:"task-status-text"},M=["onClick"],V=["onClick"];function Z(e,t,s,n,a,r){return(0,o.uX)(),(0,o.CE)("div",x,[a.user?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",j,t[0]||(t[0]=[(0,o.Lk)("p",null,"Loading user information...",-1)]))),a.user?((0,o.uX)(),(0,o.CE)("div",J,[t[1]||(t[1]=(0,o.Lk)("h2",null,"Your Pet",-1)),t[2]||(t[2]=(0,o.Lk)("img",{src:"test1.webp",alt:"Pet Image",class:"pet-image"},null,-1)),(0,o.Lk)("p",Q,"Level: "+(0,h.v_)(a.petLevel),1)])):(0,o.Q3)("",!0),a.user?((0,o.uX)(),(0,o.CE)("div",B,[t[3]||(t[3]=(0,o.Lk)("h2",null,"Task Status",-1)),t[4]||(t[4]=(0,o.Lk)("p",{class:"task-intro"},"Complete tasks to level up your pet!",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.tasks,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id},[(0,o.Lk)("span",null,(0,h.v_)(e.description),1),(0,o.Lk)("span",R,"Status: "+(0,h.v_)(e.status),1),"not started"===e.status?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t=>r.acceptTask(e)}," Accept Task ",8,M)):(0,o.Q3)("",!0),"in progress"===e.status?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t=>r.completeTask(e)}," Complete Task ",8,V)):(0,o.Q3)("",!0)])))),128))])])):(0,o.Q3)("",!0)])}var Y={data(){return{user:null,petLevel:1,virtualCoins:0,tasks:[],passiveIncomeInterval:null}},mounted(){this.loadUserData()},methods:{loadUserData(){const e=localStorage.getItem("user");if(e){this.user=JSON.parse(e);const t=this.user.uid,s=(0,X.KR)(D,`users/${t}`);(0,X.Zy)(s,(e=>{const t=e.val();t&&(this.petLevel=t.petLevel||1,this.virtualCoins=t.virtualCoins||0,this.tasks=t.tasks||[])})),this.startPassiveIncome()}else this.$router.push("/")},acceptTask(e){e.status="in progress",this.updateTasks()},completeTask(e){e.status="completed",this.petLevel+=1,this.virtualCoins+=10,this.updateTasks()},updateTasks(){const e=this.user.uid,t=(0,X.KR)(D,`users/${e}`);(0,X.yo)(t,{petLevel:this.petLevel,virtualCoins:this.virtualCoins,tasks:this.tasks})},startPassiveIncome(){this.passiveIncomeInterval=setInterval((()=>{this.virtualCoins+=1;const e=this.user.uid,t=(0,X.KR)(D,`users/${e}`);(0,X.yo)(t,{virtualCoins:this.virtualCoins})}),1e4)}},beforeUnmount(){clearInterval(this.passiveIncomeInterval)}};const G=(0,d.A)(Y,[["render",Z],["__scopeId","data-v-46db1d18"]]);var z=G;function H(e,t){return(0,o.uX)(),(0,o.CE)("div",null,"Pet")}const ee={},te=(0,d.A)(ee,[["render",H]]);var se=te;function ne(e,t){return(0,o.uX)(),(0,o.CE)("div",null,"Shop")}const ae={},oe=(0,d.A)(ae,[["render",ne]]);var re=oe;const ie={class:"task-page"},ue={class:"form-group"};function le(e,t,s,n,r,i){return(0,o.uX)(),(0,o.CE)("div",ie,[t[3]||(t[3]=(0,o.Lk)("h2",null,"Add New Task",-1)),(0,o.Lk)("form",{onSubmit:t[1]||(t[1]=(0,a.D$)(((...e)=>i.addTask&&i.addTask(...e)),["prevent"]))},[(0,o.Lk)("div",ue,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.newTaskDescription=e),placeholder:"Enter task description",required:""},null,512),[[a.Jo,r.newTaskDescription]])]),t[2]||(t[2]=(0,o.Lk)("button",{type:"submit"},"Add Task",-1))],32),t[4]||(t[4]=(0,o.Lk)("h2",null,"Existing Tasks",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.tasks,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id},(0,h.v_)(e.description)+" - Status: "+(0,h.v_)(e.status),1)))),128))])])}var ce={data(){return{newTaskDescription:"",tasks:[]}},mounted(){this.loadTasks()},methods:{addTask(){const e=JSON.parse(localStorage.getItem("user")).uid,t=(0,X.KR)(D,`users/${e}/tasks`),s={description:this.newTaskDescription,status:"not started"};(0,X.VC)(t,s).then((()=>{this.newTaskDescription=""})).catch((e=>{console.error("Error adding task:",e)}))},loadTasks(){const e=JSON.parse(localStorage.getItem("user")).uid,t=(0,X.KR)(D,`users/${e}/tasks`);(0,X.Zy)(t,(e=>{const t=e.val(),s=[];for(const n in t)s.push({id:n,...t[n]});this.tasks=s}))}}};const pe=(0,d.A)(ce,[["render",le],["__scopeId","data-v-fd79bf86"]]);var de=pe;function ve(e,t){return(0,o.uX)(),(0,o.CE)("div",null,"Profile")}const me={},he=(0,d.A)(me,[["render",ve]]);var ke=he;const fe=[{path:"/",name:"Welcome",component:K},{path:"/main",name:"Main",component:z,meta:{requiresAuth:!0}},{path:"/pet",name:"Pet",component:se,meta:{requiresAuth:!0}},{path:"/shop",name:"Shop",component:re,meta:{requiresAuth:!0}},{path:"/task",name:"Task",component:de,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:ke,meta:{requiresAuth:!0}}],ge=(0,C.aE)({history:(0,C.LA)(),routes:fe});ge.beforeEach(((e,t,s)=>{const n=JSON.parse(localStorage.getItem("user"));e.matched.some((e=>e.meta.requiresAuth))&&!n?s("/"):s()}));var be={setup(){const e=(0,n.useUserStore)(),t=(0,o.EW)((()=>e.user)),s=(0,o.EW)((()=>e.virtualCoins)),a=()=>{e.logout()};return{user:t,virtualCoins:s,handleLogout:a}}};const Ce=(0,d.A)(be,[["render",b],["__scopeId","data-v-48c9b162"]]);var Le=Ce,ye={name:"App",components:{BottomBar:m,NavBar:Le},computed:{isWelcomePage(){return this.$route&&"Welcome"===this.$route.name}},mounted(){this.initializeUserData(),this.setupPassiveIncome()},methods:{initializeUserData(){const e=(0,n.useUserStore)(),t=localStorage.getItem("user");if(t){const s=JSON.parse(t);e.setUser(s),this.setupFirebaseSync(s.uid)}},setupFirebaseSync(e){const t=(0,n.useUserStore)(),s=(0,X.KR)(D,`users/${e}`);(0,X.Zy)(s,(e=>{const s=e.val();s&&(t.setVirtualCoins(s.virtualCoins),t.setPetLevel(s.petLevel||1))})),setInterval((()=>{(0,X.Zy)(s,(e=>{const s=e.val();s&&(t.setVirtualCoins(s.virtualCoins),t.setPetLevel(s.petLevel||1),console.log("Data updated from Firebase:",s.virtualCoins))}))}),1e4)},setupPassiveIncome(){const e=(0,n.useUserStore)(),t=e.user?e.user.uid:null;if(t){const s=(0,X.KR)(D,`users/${t}`);setInterval((()=>{const t=e.virtualCoins+1;e.setVirtualCoins(t),(0,X.yo)(s,{virtualCoins:t})}),1e4)}}}};const Ee=(0,d.A)(ye,[["render",i]]);var Ie=Ee;const Se=[{path:"/",name:"Welcome",component:K},{path:"/main",name:"Main",component:z,meta:{requiresAuth:!0}},{path:"/pet",name:"Pet",component:se,meta:{requiresAuth:!0}},{path:"/shop",name:"Shop",component:re,meta:{requiresAuth:!0}},{path:"/task",name:"Task",component:de,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:ke,meta:{requiresAuth:!0}}],Te=(0,C.aE)({history:(0,C.LA)(),routes:Se});Te.beforeEach(((e,t,s)=>{const n=JSON.parse(localStorage.getItem("user"));e.matched.some((e=>e.meta.requiresAuth))&&!n?s("/"):s()}));var Ae=Te,Pe=s(5234),we=s(8950),Xe=s(2353),_e=s(292);we.Yv.add(Xe.GY1,Xe.AgW,Xe.v02,Xe.H37,Xe.X46);const Oe=(0,a.Ef)(Ie),Ue=(0,Pe.Ey)();Oe.component("font-awesome-icon",_e.gc),Oe.use(Ae),Oe.use(Ue),Oe.mount("#app")}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,n,a,o){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],o=e[c][2];for(var i=!0,u=0;u<n.length;u++)(!1&o||r>=o)&&Object.keys(s.O).every((function(e){return s.O[e](n[u])}))?n.splice(u--,1):(i=!1,o<r&&(r=o));if(i){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,a,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,r=n[0],i=n[1],u=n[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(u)var c=u(s)}for(t&&t(n);l<r.length;l++)o=r[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},n=self["webpackChunkpet"]=self["webpackChunkpet"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],(function(){return s(3282)}));n=s.O(n)})();
//# sourceMappingURL=app.dd7b73da.js.map